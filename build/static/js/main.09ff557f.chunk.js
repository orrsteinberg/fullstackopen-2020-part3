(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(15),c=n.n(u),o=n(16),l=n(17),i=n(2),m=n(4),s=n.n(m),f="/api/persons",d=function(){return s.a.get(f).then((function(e){return e.data}))},b=function(e){return s.a.post(f,e).then((function(e){return e.data}))},h=function(e,t){return s.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){s.a.delete("".concat(f,"/").concat(e))},v=function(e){var t=e.addNewPerson,n=Object(r.useState)(""),u=Object(i.a)(n,2),c=u[0],o=u[1],l=Object(r.useState)(""),m=Object(i.a)(l,2),s=m[0],f=m[1];return a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==c.trim()&&t({name:c,number:s})}},a.a.createElement("div",null,"name:"," ",a.a.createElement("input",{value:c,onChange:function(e){var t=e.target;return o(t.value)}})),a.a.createElement("div",null,"number:"," ",a.a.createElement("input",{value:s,onChange:function(e){var t=e.target;return f(t.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},E=function(e){var t=e.setFilter;return a.a.createElement("input",{onChange:function(e){var n=e.target;return t(n.value)}})},w=function(e){var t=e.person,n=e.handleDelete;return a.a.createElement("div",null,t.name,": ",t.number," ",a.a.createElement("button",{onClick:function(){return n(t.id,t.name)}},"Delete"))},j=function(e){var t=e.persons,n=e.handleDelete;return a.a.createElement("div",null,t.map((function(e){return a.a.createElement(w,{key:e.id,person:e,handleDelete:n})})))},O=function(e){var t=e.message;return t?a.a.createElement("div",{className:t.type},t.text):null},y=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],u=t[1],c=Object(r.useState)(""),m=Object(i.a)(c,2),s=m[0],f=m[1],w=Object(r.useState)(null),y=Object(i.a)(w,2),g=y[0],k=y[1];Object(r.useEffect)((function(){d().then((function(e){u(e)})).catch((function(e){return console.error(e)}))}),[]);var C=""===s?n:n.filter((function(e){return e.name.toLowerCase().includes(s.toLowerCase())}));return a.a.createElement("div",null,a.a.createElement("h1",null,"Phonebook"),a.a.createElement(O,{message:g}),a.a.createElement(E,{setFilter:f}),a.a.createElement("h2",null,"Add new"),a.a.createElement(v,{addNewPerson:function(e){var t=n.find((function(t){return n=t.name,r=e.name,n.toLowerCase()===r.toLowerCase();var n,r}));if(t){if(window.confirm("".concat(e.name," is already added to the phonebook, replace the old number with the new one?"))){var r=Object(l.a)({},t,{number:e.number});h(t.id,r).then((function(e){u(n.filter((function(e){return e.name!==r.name})).concat(e)),k({text:"Updated ".concat(r.name,"'s number"),type:"success"}),setTimeout((function(){return k(null)}),5e3)})).catch((function(e){u(n.filter((function(e){return e.name!==t.name}))),k({text:"".concat(t.name," has already been deleted from the server"),type:"error"}),setTimeout((function(){return k(null)}),5e3)}))}}else b(e).then((function(e){u([].concat(Object(o.a)(n),[e])),k({text:"Added ".concat(e.name),type:"success"}),setTimeout((function(){return k(null)}),5e3)})).catch((function(e){k({text:e.response.data.error,type:"error"}),setTimeout((function(){return k(null)}),5e3),console.error(e)}))}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(j,{persons:C,handleDelete:function(e,t){window.confirm("Are you sure you want to delete ".concat(t,"?"))&&(p(e),u(n.filter((function(t){return t.id!==e}))))}}))};n(40);c.a.render(a.a.createElement(y,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.09ff557f.chunk.js.map